{"version":3,"file":"post-http.js","sourceRoot":"","sources":["../../../src/http/post-http.ts"],"names":[],"mappings":";;;IAGA;QAKE;YAFQ,cAAS,GAAW,gCAAgC,CAAC;YAG3D,IAAI,CAAC,IAAI,GAAG,IAAI,cAAI,EAAE,CAAC;QACzB,CAAC;QAGD,8CAA8C;QAC9C,wBAAK,GAAL;YAEE,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAE,UAAC,QAAiB;gBAC3D,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YACnC,CAAC,CAAC,CAAA;QACJ,CAAC;QAED,uBAAI,GAAJ;YAEE,IAAM,MAAM,GAAG,MAAM,CAAC,CAAC,YAAY;YACnC,IAAM,KAAK,GAAG,IAAI,cAAc,EAAE,CAAC,CAAC,oDAAoD;YAExF,KAAK,CAAC,IAAI,CAAC,MAAM,EAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAElC;;;;eAIG;YACH,KAAK,CAAC,kBAAkB,GAAG,UAAS,KAAW;gBAC7C,sBAAsB;gBACtB,IAAG,IAAI,CAAC,UAAU,IAAI,CAAC,EAAC,EAAE,sBAAsB;oBAE9C,IAAG,IAAI,CAAC,MAAM,IAAI,GAAG,EAAC;wBACpB,gCAAgC;qBACjC;oBAED,IAAG,IAAI,CAAC,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,MAAM,IAAI,GAAG,EAAC;wBAC1C,mBAAmB;qBACpB;iBAEF;YAGH,CAAC,CAAC;YAEF,KAAK,CAAC,IAAI,EAAE,CAAC;QAEf,CAAC;QAEH,eAAC;IAAD,CAAC,AAnDD,IAmDC","sourcesContent":["import Http from \"./http\";\r\nimport { Response } from \"./response\";\r\n\r\nexport default class PostHttp {\r\n\r\n  private http: Http;\r\n  private end_point: string = 'http://localhost:3000/produtos';\r\n\r\n  constructor(){\r\n    this.http = new Http();\r\n  }\r\n  \r\n\r\n  // como era : query( callable, callableError )\r\n  query():Promise<Array<any>>\r\n  {\r\n    return this.http.get(this.end_point).then( (response:Response) => {\r\n      return JSON.parse(response.body);\r\n    })\r\n  }\r\n\r\n  save(){\r\n\r\n    const method = 'POST'; // verb http\r\n    const xhttp = new XMLHttpRequest(); // objeto representando requisicoes assicronas(ajax)\r\n\r\n    xhttp.open(method,this.end_point);\r\n\r\n    /**\r\n     * Para pegar a reservada this do contexto do evento é necessario usar a notação com function(){}\r\n     * Usando a notação (event):any=>{} não possui acesso ao this do evento e sim da Classe\r\n     * ref: https://pt.stackoverflow.com/questions/143399/qual-a-diferen%C3%A7a-entre-function-e-por-que-n%C3%A3o-funciona-o-http-ge\r\n     */\r\n    xhttp.onreadystatechange = function(event:Event):void {\r\n      // console.log(event);\r\n      if(this.readyState == 4){ // status OK do client\r\n        \r\n        if(this.status == 200){\r\n          // callable(xhttp.responseText);\r\n        }\r\n\r\n        if(this.status == 400 || this.status == 500){\r\n          // callableError();\r\n        }\r\n\r\n      }\r\n\r\n      \r\n    };\r\n\r\n    xhttp.send();\r\n\r\n  }\r\n\r\n}"]}